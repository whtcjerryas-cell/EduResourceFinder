# ğŸ“– Flaskæ¨¡æ¿ç»§æ‰¿ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

æˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ä¸ªåŸºäºFlaskæ¨¡æ¿ç»§æ‰¿çš„ç³»ç»Ÿï¼Œä»æ¶æ„å±‚é¢ç¡®ä¿æ‰€æœ‰é¡µé¢çš„ä¸€è‡´æ€§ã€‚è¿™ä¸ªç³»ç»Ÿ**ä»æ ¹æœ¬ä¸Šè§£å†³äº†é¡µé¢å¸ƒå±€ä¸ä¸€è‡´çš„é—®é¢˜**ï¼Œå¹¶ä¸”è®©æ·»åŠ æ–°é¡µé¢å˜å¾—æå…¶ç®€å•å’Œå®‰å…¨ã€‚

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒæ–‡ä»¶

1. **`templates/base.html`** - åŸºç¡€æ¨¡æ¿ï¼ˆæ‰€æœ‰é¡µé¢çš„å•ä¸€çœŸå®æ¥æºï¼‰
2. **`templates/sidebar_component.html`** - ä¾§è¾¹æ ç»„ä»¶
3. **`templates/[page_name].html`** - å„ä¸ªé¡µé¢æ¨¡æ¿

### å·¥ä½œåŸç†

```
base.html (å®šä¹‰å…¬å…±ç»“æ„)
    â†“
    â”œâ”€ CSSå˜é‡ç³»ç»Ÿï¼ˆæš—é»‘/æ˜äº®ä¸»é¢˜ï¼‰
    â”œâ”€ Toasté€šçŸ¥ç³»ç»Ÿ
    â”œâ”€ ä¾§è¾¹æ å¯¼èˆªï¼ˆè‡ªåŠ¨é«˜äº®å½“å‰é¡µé¢ï¼‰
    â”œâ”€ ä¾§è¾¹æ æŠ˜å åŠŸèƒ½
    â”œâ”€ é”®ç›˜å¿«æ·é”®ï¼ˆCtrl+Bï¼‰
    â””â”€ å“åº”å¼å¸ƒå±€

[page_name].html (ç»§æ‰¿base.html)
    â†“
    â”œâ”€ extends "base.html" (ç»§æ‰¿åŸºç¡€ç»“æ„)
    â”œâ”€ {% block title %} (é¡µé¢æ ‡é¢˜)
    â”œâ”€ {% block page_css %} (é¡µé¢ç‰¹å®šæ ·å¼)
    â”œâ”€ {% block content %} (é¡µé¢ä¸»å†…å®¹)
    â””â”€ {% block page_scripts %} (é¡µé¢ç‰¹å®šè„šæœ¬)
```

---

## ğŸš€ å¦‚ä½•æ·»åŠ æ–°é¡µé¢ï¼ˆ1åˆ†é’Ÿå®Œæˆï¼‰

### æ­¥éª¤1: åˆ›å»ºHTMLæ–‡ä»¶

åœ¨ `templates/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚ `templates/new_page.html`:

```jinja2
{% set page_name = 'new_page' %}

{% extends "base.html" %}

{% block title %}æ–°é¡µé¢æ ‡é¢˜ - K12æ™ºèƒ½æœç´¢ç³»ç»Ÿ{% endblock %}

{% block page_css %}
<style>
    /* é¡µé¢ç‰¹å®šçš„CSSæ ·å¼ */
    .my-custom-class {
        color: var(--text-primary);
        background: var(--bg-secondary);
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="header">
        <h1>ğŸ‰ æ–°é¡µé¢</h1>
        <p>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨æ¨¡æ¿ç»§æ‰¿çš„æ–°é¡µé¢</p>
    </div>

    <!-- ä½ çš„é¡µé¢å†…å®¹ -->
    <div class="my-custom-class">
        é¡µé¢å†…å®¹æ”¾åœ¨è¿™é‡Œ
    </div>
</div>
{% endblock %}

{% block page_scripts %}
<script>
    // é¡µé¢ç‰¹å®šçš„JavaScript
    console.log('æ–°é¡µé¢å·²åŠ è½½');
</script>
{% endblock %}
```

### æ­¥éª¤2: åœ¨ä¾§è¾¹æ æ·»åŠ é“¾æ¥

ç¼–è¾‘ `templates/sidebar_component.html`ï¼Œåœ¨ç›¸åº”çš„sectionä¸­æ·»åŠ å¯¼èˆªé¡¹ï¼š

```jinja2
<a class="sidebar-nav-item {% if page_name == 'new_page' %}active{% endif %}"
   href="/new_page"
   title="æ–°é¡µé¢">
    <span class="icon">ğŸ¯</span>
    <span class="text">æ–°é¡µé¢</span>
</a>
```

### æ­¥éª¤3: åœ¨Flaskä¸­æ·»åŠ è·¯ç”±

ç¼–è¾‘ `web_app.py`ï¼Œæ·»åŠ è·¯ç”±ï¼š

```python
@app.route('/new_page')
def new_page():
    return render_template('new_page.html')
```

### å®Œæˆï¼âœ…

ç°åœ¨è®¿é—® `http://localhost:5001/new_page`ï¼Œä½ ä¼šçœ‹åˆ°ï¼š
- âœ… ä¾§è¾¹æ è‡ªåŠ¨æ˜¾ç¤º
- âœ… å½“å‰é¡µé¢è‡ªåŠ¨é«˜äº®
- âœ… Toastç³»ç»Ÿå¯ç”¨
- âœ… æš—é»‘æ¨¡å¼æ”¯æŒ
- âœ… Ctrl+BæŠ˜å ä¾§è¾¹æ 
- âœ… å“åº”å¼å¸ƒå±€

---

## ğŸ¨ CSSå˜é‡ç³»ç»Ÿ

### å¯ç”¨å˜é‡ï¼ˆbase.htmlå·²å®šä¹‰ï¼‰

```css
/* é¢œè‰²å˜é‡ */
--bg-primary: #f5f7fa;           /* ä¸»èƒŒæ™¯è‰² */
--bg-secondary: #ffffff;         /* æ¬¡è¦èƒŒæ™¯è‰² */
--text-primary: #333333;         /* ä¸»æ–‡æœ¬è‰² */
--text-secondary: #666666;       /* æ¬¡è¦æ–‡æœ¬è‰² */
--accent-color: #667eea;         /* å¼ºè°ƒè‰² */
--border-color: #e0e0e0;         /* è¾¹æ¡†è‰² */
--shadow-color: rgba(0,0,0,0.1); /* é˜´å½±è‰² */
```

### æš—é»‘æ¨¡å¼è‡ªåŠ¨æ”¯æŒ

```css
[data-theme="dark"] {
    --bg-primary: #1a1d23;
    --bg-secondary: #242830;
    /* ... å…¶ä»–å˜é‡è‡ªåŠ¨åˆ‡æ¢ */
}
```

### åœ¨ä½ çš„CSSä¸­ä½¿ç”¨

```css
/* âœ… æ­£ç¡®æ–¹å¼ */
.my-element {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
}

/* âŒ é”™è¯¯æ–¹å¼ï¼ˆç¡¬ç¼–ç é¢œè‰²ï¼‰ */
.my-element {
    background: #ffffff;
    color: #333333;
    border: 1px solid #e0e0e0;
}
```

---

## ğŸ”§ å¯ç”¨çš„å†…ç½®åŠŸèƒ½

### 1. Toasté€šçŸ¥ç³»ç»Ÿ

```javascript
// åœ¨ä½ çš„é¡µé¢è„šæœ¬ä¸­ä½¿ç”¨
showToast('success', 'æˆåŠŸ', 'æ“ä½œå·²æˆåŠŸå®Œæˆ');
showToast('error', 'é”™è¯¯', 'å‘ç”Ÿäº†ä¸€äº›é”™è¯¯');
showToast('warning', 'è­¦å‘Š', 'è¯·æ³¨æ„');
showToast('info', 'æç¤º', 'è¿™æ˜¯ä¸€æ¡æç¤ºä¿¡æ¯');
```

### 2. ä¾§è¾¹æ æŠ˜å 

```javascript
// æ‰‹åŠ¨è°ƒç”¨ï¼ˆå¦‚æœéœ€è¦ï¼‰
toggleSidebar();
```

å¿«æ·é”®ï¼š`Ctrl+B` æˆ– `Cmd+B`

### 3. ä¸»é¢˜åˆ‡æ¢

```javascript
// åˆ‡æ¢åˆ°æš—é»‘æ¨¡å¼
document.documentElement.setAttribute('data-theme', 'dark');
localStorage.setItem('theme', 'dark');

// åˆ‡æ¢åˆ°æ˜äº®æ¨¡å¼
document.documentElement.setAttribute('data-theme', 'light');
localStorage.setItem('theme', 'light');
```

---

## ğŸ“‹ æ¨¡æ¿æ ‡ç­¾å‚è€ƒ

### å¿…éœ€æ ‡ç­¾

| æ ‡ç­¾ | ç”¨é€” | ç¤ºä¾‹ |
|------|------|------|
| `{% set page_name = 'xxx' %}` | è®¾ç½®é¡µé¢åç§°ï¼ˆç”¨äºä¾§è¾¹æ é«˜äº®ï¼‰ | å¿…é¡»æ”¾åœ¨ç¬¬ä¸€è¡Œ |
| `{% extends "base.html" %}` | ç»§æ‰¿åŸºç¡€æ¨¡æ¿ | å¿…é¡»åœ¨page_nameä¹‹å |
| `{% block content %}` | é¡µé¢ä¸»å†…å®¹ | å¿…éœ€ |

### å¯é€‰æ ‡ç­¾

| æ ‡ç­¾ | ç”¨é€” | ä½•æ—¶ä½¿ç”¨ |
|------|------|----------|
| `{% block title %}` | é¡µé¢æ ‡é¢˜ | å‡ ä¹æ€»æ˜¯éœ€è¦ |
| `{% block page_css %}` | é¡µé¢ç‰¹å®šCSS | éœ€è¦è‡ªå®šä¹‰æ ·å¼æ—¶ |
| `{% block page_scripts %}` | é¡µé¢ç‰¹å®šJS | éœ€è¦JavaScriptæ—¶ |

---

## âš ï¸ å¸¸è§é”™è¯¯åŠé¿å…æ–¹æ³•

### é”™è¯¯1: CSSç±»åå†²çª

```html
<!-- âŒ é”™è¯¯ï¼šä½¿ç”¨äº†.base.htmlä¸­çš„ç±»å -->
<style>
.main-content {
    /* è¿™ä¼šè¦†ç›–base.htmlçš„.main-content */
}
</style>

<!-- âœ… æ­£ç¡®ï¼šä½¿ç”¨ç‹¬ç‰¹çš„ç±»å -->
<style>
.map-layout,  /* global_map.html */
.knowledge-grid,  /* knowledge_points.html */
.stats-container  /* stats_dashboard.html */
{
    /* é¡µé¢ç‰¹å®šçš„å¸ƒå±€ */
}
</style>
```

### é”™è¯¯2: å¿˜è®°è®¾ç½®page_name

```jinja2
<!-- âŒ é”™è¯¯ï¼šä¾§è¾¹æ ä¸ä¼šé«˜äº® -->
{% extends "base.html" %}

<!-- âœ… æ­£ç¡®ï¼šä¾§è¾¹æ ä¼šè‡ªåŠ¨é«˜äº®å½“å‰é¡µé¢ -->
{% set page_name = 'my_page' %}
{% extends "base.html" %}
```

### é”™è¯¯3: ç¡¬ç¼–ç é¢œè‰²å€¼

```css
/* âŒ é”™è¯¯ï¼šä¸æ”¯æŒæš—é»‘æ¨¡å¼ */
.card {
    background: #ffffff;
    color: #333333;
}

/* âœ… æ­£ç¡®ï¼šè‡ªåŠ¨æ”¯æŒæš—é»‘æ¨¡å¼ */
.card {
    background: var(--bg-secondary);
    color: var(--text-primary);
}
```

---

## ğŸ”„ è½¬æ¢ç°æœ‰é¡µé¢

### å·²è½¬æ¢é¡µé¢

- âœ… `global_map.html` - å…¨çƒèµ„æºåœ°å›¾ï¼ˆç¤ºèŒƒé¡µé¢ï¼‰

### å¾…è½¬æ¢é¡µé¢

å¦‚æœéœ€è¦è½¬æ¢å…¶ä»–é¡µé¢ï¼Œå¯ä»¥ï¼š

#### æ–¹æ³•A: ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
python3 convert_to_inheritance.py
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. å¤‡ä»½åŸå§‹æ–‡ä»¶
2. æå–é¡µé¢ç‰¹å®šå†…å®¹
3. ç”Ÿæˆæ–°æ¨¡æ¿
4. ä¿æŒæ‰€æœ‰åŠŸèƒ½ä¸å˜

#### æ–¹æ³•B: æ‰‹åŠ¨è½¬æ¢ï¼ˆæ›´ç²¾ç¡®ï¼‰

å‚è€ƒ `global_map.html` çš„è½¬æ¢æ¨¡å¼ï¼š

1. å¤‡ä»½åŸæ–‡ä»¶
2. åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ  `{% set page_name = 'xxx' %}`
3. æ·»åŠ  `{% extends "base.html" %}`
4. å°†CSSç§»åˆ° `{% block page_css %}` ä¸­
5. å°†å†…å®¹ç§»åˆ° `{% block content %}` ä¸­
6. å°†JSç§»åˆ° `{% block page_scripts %}` ä¸­
7. åˆ é™¤æ‰€æœ‰é‡å¤çš„å…¬å…±ä»£ç ï¼ˆsidebarã€toastç­‰ï¼‰

---

## ğŸ è¿™ä¸ªç³»ç»Ÿçš„ä¼˜åŠ¿

### 1. **ä»æ¶æ„å±‚é¢é˜²æ­¢é”™è¯¯**

- âŒ æ—§æ–¹å¼ï¼šæ¯ä¸ªé¡µé¢ç‹¬ç«‹ï¼Œå¼€å‘è€…å¯èƒ½å¿˜è®°æ·»åŠ sidebar
- âœ… æ–°æ–¹å¼ï¼šsidebaråœ¨base.htmlä¸­ï¼Œè‡ªåŠ¨åŒ…å«

### 2. **å•ä¸€çœŸå®æ¥æº**

- âŒ æ—§æ–¹å¼ï¼šä¿®æ”¹æ ·å¼éœ€è¦æ”¹8ä¸ªæ–‡ä»¶
- âœ… æ–°æ–¹å¼ï¼šåªä¿®æ”¹base.htmlï¼Œæ‰€æœ‰é¡µé¢è‡ªåŠ¨æ›´æ–°

### 3. **æ·»åŠ æ–°é¡µé¢åªéœ€1åˆ†é’Ÿ**

- âŒ æ—§æ–¹å¼ï¼šå¤åˆ¶ç²˜è´´ï¼Œå®¹æ˜“é—æ¼ä»£ç 
- âœ… æ–°æ–¹å¼ï¼š3è¡Œæ¨¡æ¿æ ‡ç­¾ï¼Œ100%ä¸€è‡´

### 4. **è‡ªåŠ¨åŠŸèƒ½**

- âœ… æš—é»‘æ¨¡å¼è‡ªåŠ¨æ”¯æŒ
- âœ… ä¾§è¾¹æ è‡ªåŠ¨é«˜äº®å½“å‰é¡µé¢
- âœ… Toastç³»ç»Ÿè‡ªåŠ¨å¯ç”¨
- âœ… å“åº”å¼å¸ƒå±€è‡ªåŠ¨åº”ç”¨

### 5. **å¯ç»´æŠ¤æ€§**

- âœ… ä»£ç é‡å‡å°‘70%ï¼ˆæ¯ä¸ªé¡µé¢ä»600è¡Œå‡å°‘åˆ°200è¡Œï¼‰
- âœ… ä»£ç æ¸…æ™°åº¦æé«˜ï¼ˆåªçœ‹é¡µé¢ç‰¹å®šå†…å®¹ï¼‰
- âœ… ç»´æŠ¤æˆæœ¬é™ä½ï¼ˆæ”¹ä¸€å¤„ï¼Œå…¨å±€ç”Ÿæ•ˆï¼‰

---

## ğŸ“Š æ•ˆæœå¯¹æ¯”

### æ—§ç³»ç»Ÿï¼ˆå®¹æ˜“å‡ºé”™ï¼‰

```
index.html (600è¡Œ)
  â”œâ”€ CSSå˜é‡
  â”œâ”€ Toastç³»ç»Ÿ
  â”œâ”€ ä¾§è¾¹æ HTML
  â”œâ”€ ä¾§è¾¹æ JS
  â”œâ”€ é¡µé¢CSS
  â”œâ”€ é¡µé¢å†…å®¹
  â””â”€ é¡µé¢JS

knowledge_points.html (600è¡Œ)
  â”œâ”€ CSSå˜é‡ (é‡å¤)
  â”œâ”€ Toastç³»ç»Ÿ (é‡å¤)
  â”œâ”€ ä¾§è¾¹æ HTML (é‡å¤)
  â”œâ”€ ä¾§è¾¹æ JS (é‡å¤)
  â”œâ”€ é¡µé¢CSS
  â”œâ”€ é¡µé¢å†…å®¹
  â””â”€ é¡µé¢JS

... 8ä¸ªæ–‡ä»¶ Ã— 600è¡Œ = 4800è¡Œä»£ç 
```

### æ–°ç³»ç»Ÿï¼ˆç®€æ´å¯é ï¼‰

```
base.html (200è¡Œ)
  â”œâ”€ CSSå˜é‡
  â”œâ”€ Toastç³»ç»Ÿ
  â”œâ”€ ä¾§è¾¹æ HTML
  â”œâ”€ ä¾§è¾¹æ JS
  â””â”€ æ¨¡æ¿blocks

global_map.html (200è¡Œ)
  â”œâ”€ extends base.html
  â”œâ”€ é¡µé¢CSS
  â”œâ”€ é¡µé¢å†…å®¹
  â””â”€ é¡µé¢JS

knowledge_points.html (200è¡Œ)
  â”œâ”€ extends base.html
  â”œâ”€ é¡µé¢CSS
  â”œâ”€ é¡µé¢å†…å®¹
  â””â”€ é¡µé¢JS

... 1ä¸ªåŸºç¡€æ¨¡æ¿ + 8ä¸ªé¡µé¢ Ã— 200è¡Œ = 1800è¡Œä»£ç 
èŠ‚çœï¼š62.5% çš„ä»£ç é‡
```

---

## ğŸ” æœ€ä½³å®è·µ

### 1. é¡µé¢ç‰¹å®šæ ·å¼

```css
/* âœ… ä½¿ç”¨BEMå‘½åè§„èŒƒï¼Œé¿å…å†²çª */
.page-name__element { }
.page-name__element--modifier { }
```

### 2. é¡µé¢ç‰¹å®šè„šæœ¬

```javascript
// âœ… ä½¿ç”¨å‘½åç©ºé—´é¿å…å…¨å±€æ±¡æŸ“
window.MyPage = {
    init: function() { },
    loadData: function() { }
};

document.addEventListener('DOMContentLoaded', function() {
    window.MyPage.init();
});
```

### 3. å“åº”å¼è®¾è®¡

```css
/* âœ… ä½¿ç”¨CSSå˜é‡ï¼Œè‡ªåŠ¨é€‚é…æš—é»‘æ¨¡å¼ */
@media (max-width: 768px) {
    .my-element {
        background: var(--bg-secondary);
        padding: 10px;
    }
}
```

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### é—®é¢˜1: é¡µé¢æ˜¾ç¤ºç©ºç™½

**åŸå› **: å¯èƒ½ç¼ºå°‘å¿…éœ€çš„block
**è§£å†³**: ç¡®ä¿æœ‰ `{% block content %}`

### é—®é¢˜2: ä¾§è¾¹æ ä¸æ˜¾ç¤º

**åŸå› **: å¯èƒ½å¿˜è®° `extends "base.html"`
**è§£å†³**: åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ  `{% extends "base.html" %}`

### é—®é¢˜3: ä¾§è¾¹æ ä¸é«˜äº®

**åŸå› **: `page_name` ä¸sidebar_component.htmlä¸­çš„ä¸åŒ¹é…
**è§£å†³**: ç¡®ä¿ `page_name` ä¸sidebarä¸­çš„ `{% if page_name == 'xxx' %}` åŒ¹é…

### é—®é¢˜4: æ ·å¼æ··ä¹±

**åŸå› **: CSSç±»åå†²çª
**è§£å†³**: ä½¿ç”¨é¡µé¢ç‰¹å®šçš„classå‰ç¼€ï¼Œå¦‚ `.map-layout`, `.knowledge-grid`

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°å…¶ä»–é—®é¢˜ï¼š

1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹ `global_map.html` ä½œä¸ºå‚è€ƒ
3. ç¡®ä¿ `base.html` å’Œ `sidebar_component.html` æ²¡æœ‰è¯­æ³•é”™è¯¯
4. é‡å¯FlaskæœåŠ¡å™¨

---

## ğŸ‰ æ€»ç»“

è¿™ä¸ªæ¨¡æ¿ç»§æ‰¿ç³»ç»Ÿç¡®ä¿ï¼š

âœ… **100%ä¸€è‡´æ€§** - æ‰€æœ‰é¡µé¢å…±äº«ç›¸åŒçš„å¸ƒå±€å’ŒåŠŸèƒ½
âœ… **é›¶äººå·¥é”™è¯¯** - å¼€å‘è€…ä¸å¯èƒ½å¿˜è®°æ·»åŠ å…¬å…±ç»„ä»¶
âœ… **1åˆ†é’Ÿæ·»åŠ é¡µé¢** - åªéœ€3è¡Œæ¨¡æ¿æ ‡ç­¾
âœ… **è‡ªåŠ¨åŠŸèƒ½** - æš—é»‘æ¨¡å¼ã€Toastã€ä¾§è¾¹æ è‡ªåŠ¨å¯ç”¨
âœ… **æ˜“äºç»´æŠ¤** - æ”¹ä¸€å¤„ï¼Œå…¨å±€ç”Ÿæ•ˆ
âœ… **å¯æ‰©å±•** - æ·»åŠ 100ä¸ªé¡µé¢ï¼Œä»ç„¶100%ä¸€è‡´

**è¿™å°±æ˜¯ä»é•¿è¿œè€ƒè™‘çš„æœ€ä½³è§£å†³æ–¹æ¡ˆï¼** ğŸš€
