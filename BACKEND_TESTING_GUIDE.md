# åç«¯æ¨¡å—æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

è§„åˆ™æœç´¢å¼•æ“æ˜¯**åç«¯Pythonæ¨¡å—**ï¼Œæ²¡æœ‰webUIã€‚æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•æµ‹è¯•æ­¤ç±»åç«¯åŠŸèƒ½ã€‚

---

## ğŸ¯ æµ‹è¯•æ–¹æ³•

### æ–¹æ³•1ï¼šå•å…ƒæµ‹è¯•ï¼ˆå·²å®Œæˆï¼‰âœ…

**ç”¨é€”**ï¼šéªŒè¯ä»£ç é€»è¾‘å’Œè¾¹ç•Œæ¡ä»¶

**è¿è¡Œ**ï¼š
```bash
python3 -m pytest tests/test_rule_based_search.py -v
```

**ç»“æœ**ï¼š15/15 é€šè¿‡ âœ…

**è¦†ç›–**ï¼š
- âœ… é…ç½®åŠ è½½å’ŒéªŒè¯
- âœ… æœ¬åœ°åŒ–æŸ¥è¯¢ç”Ÿæˆ
- âœ… åŸŸåè¯„åˆ†
- âœ… å»é‡
- âœ… é”™è¯¯å¤„ç†
- âœ… è¾¹ç•Œæ¡ä»¶

---

### æ–¹æ³•2ï¼šæ¨¡æ‹Ÿæœç´¢æµ‹è¯•

**ç”¨é€”**ï¼šæ— éœ€çœŸå®APIè°ƒç”¨å³å¯æµ‹è¯•åŠŸèƒ½

**è¿è¡Œ**ï¼š
```bash
python3 demo_rule_based_search.py
```

**ç»“æœ**ï¼šæ¼”ç¤ºè„šæœ¬ âœ…

**å±•ç¤º**ï¼š
- å°å°¼æœ¬åœ°åŒ–æŸ¥è¯¢ç”Ÿæˆ
- åŸŸåè¯„åˆ†æ’åº
- DEFAULTé…ç½®fallback
- é”™è¯¯å¤„ç†

---

### æ–¹æ³•3ï¼šçœŸå®æœç´¢æµ‹è¯•ï¼ˆéœ€è¦ä¾èµ–ï¼‰

**ç”¨é€”**ï¼šæµ‹è¯•ä¸çœŸå®search_engine_v2çš„é›†æˆ

**å‰æ**ï¼šå®‰è£…ä¾èµ–
```bash
pip3 install --break-system-packages pydantic
```

**è¿è¡Œ**ï¼š
```bash
python3 test_real_search.py
```

**æµ‹è¯•å†…å®¹**ï¼š
1. å°å°¼çœŸå®æœç´¢
2. å¤šå›½æ”¯æŒæµ‹è¯•
3. é”™è¯¯å¤„ç†
4. é…ç½®éªŒè¯

---

### æ–¹æ³•4ï¼šäº¤äº’å¼Pythonæµ‹è¯•

**ç”¨é€”**ï¼šæ‰‹åŠ¨æ¢ç´¢å’Œæµ‹è¯•

**è¿è¡Œ**ï¼š
```bash
python3 -i core/rule_based_search.py
```

**äº¤äº’ç¤ºä¾‹**ï¼š
```python
>>> from core.rule_based_search import RuleBasedSearchEngine
>>>
>>> # åˆå§‹åŒ–
>>> engine = RuleBasedSearchEngine()
>>>
>>> # æŸ¥çœ‹é…ç½®çš„å›½å®¶
>>> list(engine.config.keys())
['ID', 'DEFAULT']
>>>
>>> # æŸ¥çœ‹å°å°¼é…ç½®
>>> engine.config['ID']['grade_1']['math']['localized_terms']
{'grade': 'SD Kelas 1', 'subject': 'Matematika', 'curriculum': 'Kurikulum Merdeka'}
>>>
>>> # æŸ¥çœ‹æŸ¥è¯¢æ¨¡æ¿
>>> engine.config['ID']['grade_1']['math']['queries']
['Matematika {grade} {curriculum}', ...]
>>>
>>> # æŸ¥çœ‹å¯ä¿¡åŸŸå
>>> engine.config['ID']['grade_1']['math']['trusted_domains']
{'ruangguru.com': 9.5, 'youtube.com': 7.5, ...}
```

---

### æ–¹æ³•5ï¼šæ‰‹åŠ¨Mockæµ‹è¯•

åˆ›å»º `test_manual.py`:
```python
from core.rule_based_search import RuleBasedSearchEngine

# åˆ›å»ºå¼•æ“
engine = RuleBasedSearchEngine()

# Mockæœç´¢å¼•æ“
class MockSearchEngine:
    def search(self, query, country):
        return [
            {'url': 'https://ruangguru.com/math', 'title': 'Ruangguru Math'},
            {'url': 'https://youtube.com/math', 'title': 'YouTube Math'},
        ]

# è®¾ç½®mock
engine.search_engine = MockSearchEngine()

# æ‰§è¡Œæœç´¢
result = engine.search('ID', '1', 'math')

# æŸ¥çœ‹ç»“æœ
for r in result['results']:
    print(f"[{r['score']:.1f}åˆ†] {r['title']}")
```

è¿è¡Œï¼š
```bash
python3 test_manual.py
```

---

## ğŸ“Š æµ‹è¯•å±‚æ¬¡

### Level 1: å•å…ƒæµ‹è¯• âœ…
- **èŒƒå›´**: ä»£ç é€»è¾‘
- **é€Ÿåº¦**: å¿«
- **ä¾èµ–**: æ— 
- **çŠ¶æ€**: å·²å®Œæˆï¼ˆ15/15é€šè¿‡ï¼‰

### Level 2: é›†æˆæµ‹è¯•
- **èŒƒå›´**: ä¸search_engine_v2é›†æˆ
- **é€Ÿåº¦**: ä¸­ç­‰
- **ä¾èµ–**: pydantic
- **çŠ¶æ€**: éœ€è¦å®‰è£…ä¾èµ–

### Level 3: ç«¯åˆ°ç«¯æµ‹è¯•
- **èŒƒå›´**: å®Œæ•´æœç´¢æµç¨‹
- **é€Ÿåº¦**: æ…¢ï¼ˆçœŸå®APIè°ƒç”¨ï¼‰
- **ä¾èµ–**: search_engine_v2 + APIå¯†é’¥
- **çŠ¶æ€**: å¯é€‰

---

## ğŸ› ï¸ å½“å‰æµ‹è¯•çŠ¶æ€

### âœ… å·²å®Œæˆ
1. **å•å…ƒæµ‹è¯•**: 15ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡
2. **æ¨¡æ‹Ÿæµ‹è¯•**: demoè„šæœ¬è¿è¡ŒæˆåŠŸ
3. **é…ç½®éªŒè¯**: é…ç½®ç»“æ„æ­£ç¡®

### âš ï¸ éœ€è¦ä¾èµ–
4. **çœŸå®æœç´¢æµ‹è¯•**: éœ€è¦å®‰è£…pydantic

### ğŸ“ å¯é€‰
5. **ç«¯åˆ°ç«¯æµ‹è¯•**: éœ€è¦search_engine_v2å®Œå…¨é…ç½®

---

## ğŸš€ å¿«é€Ÿæµ‹è¯•å‘½ä»¤

```bash
# 1. å•å…ƒæµ‹è¯•ï¼ˆæ¨èï¼‰
python3 -m pytest tests/test_rule_based_search.py -v

# 2. æ¼”ç¤ºè„šæœ¬
python3 demo_rule_based_search.py

# 3. é…ç½®éªŒè¯
python3 -c "
from core.rule_based_search import RuleBasedSearchEngine
engine = RuleBasedSearchEngine()
print('æ”¯æŒçš„å›½å®¶:', list(engine.config.keys()))
print('å°å°¼é…ç½®:', 'ID' in engine.config)
"

# 4. çœŸå®æœç´¢ï¼ˆéœ€è¦å…ˆå®‰è£…ä¾èµ–ï¼‰
pip3 install --break-system-packages pydantic
python3 test_real_search.py
```

---

## ğŸ’¡ æµ‹è¯•æœ€ä½³å®è·µ

### å¯¹äºåç«¯æ¨¡å—ï¼š

1. **å•å…ƒæµ‹è¯•ä¼˜å…ˆ** - å·²å®Œæˆ âœ…
   - æµ‹è¯•æ‰€æœ‰å‡½æ•°å’Œæ–¹æ³•
   - è¦†ç›–è¾¹ç•Œæ¡ä»¶
   - éªŒè¯é”™è¯¯å¤„ç†

2. **é…ç½®éªŒè¯**
   - æ£€æŸ¥YAMLæ ¼å¼
   - éªŒè¯å¿…éœ€å­—æ®µ
   - æµ‹è¯•é»˜è®¤å€¼

3. **é›†æˆæµ‹è¯•**
   - Mockå¤–éƒ¨ä¾èµ–
   - æµ‹è¯•æ¨¡å—é—´äº¤äº’
   - éªŒè¯æ•°æ®æµ

4. **æ‰‹åŠ¨æ¢ç´¢**
   - äº¤äº’å¼Pythonä¼šè¯
   - æ‰“å°ä¸­é—´ç»“æœ
   - è°ƒè¯•é—®é¢˜

### ä¸éœ€è¦WebUIæµ‹è¯•çš„æƒ…å†µï¼š

- âœ… çº¯æ•°æ®å¤„ç†æ¨¡å—
- âœ… APIå®¢æˆ·ç«¯åº“
- âœ… å‘½ä»¤è¡Œå·¥å…·
- âœ… åå°æœåŠ¡

---

## ğŸ“ æµ‹è¯•æ¸…å•

### åŸºç¡€åŠŸèƒ½ âœ…
- [x] é…ç½®åŠ è½½
- [x] æŸ¥è¯¢ç”Ÿæˆ
- [x] åŸŸåè¯„åˆ†
- [x] ç»“æœæ’åº
- [x] å»é‡

### é”™è¯¯å¤„ç† âœ…
- [x] é…ç½®æ–‡ä»¶ä¸å­˜åœ¨
- [x] YAMLæ ¼å¼é”™è¯¯
- [x] ç©ºé…ç½®
- [x] ç¼ºå°‘å¿…éœ€å­—æ®µ
- [x] ä¸æ”¯æŒçš„ç»„åˆ

### æœ¬åœ°åŒ– âœ…
- [x] å°å°¼æŸ¥è¯¢ç”Ÿæˆ
- [x] å¹´çº§æ ‡å‡†åŒ–
- [x] å­¦ç§‘æ ‡å‡†åŒ–
- [x] å­åŸŸååŒ¹é…

### é›†æˆ âš ï¸
- [ ] ä¸search_engine_v2é›†æˆï¼ˆéœ€è¦pydanticï¼‰
- [ ] çœŸå®APIè°ƒç”¨ï¼ˆéœ€è¦APIå¯†é’¥ï¼‰
- [ ] æ€§èƒ½æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

---

## ğŸ“ ç»“è®º

**åç«¯æ¨¡å—ä¸éœ€è¦WebUIï¼**

å¯¹äºçº¯åç«¯Pythonæ¨¡å—ï¼Œåˆé€‚çš„æµ‹è¯•æ–¹æ³•æ˜¯ï¼š
1. âœ… å•å…ƒæµ‹è¯•ï¼ˆpytestï¼‰- å·²å®Œæˆ
2. âœ… Mockæµ‹è¯• - å·²å®Œæˆ
3. âš ï¸ é›†æˆæµ‹è¯• - éœ€è¦ä¾èµ–
4. ğŸ“ æ‰‹åŠ¨æµ‹è¯• - å¯é€‰

**å½“å‰çŠ¶æ€**: æ ¸å¿ƒåŠŸèƒ½å·²é€šè¿‡å•å…ƒæµ‹è¯•éªŒè¯ âœ…

---

*æœ€åæ›´æ–°: 2026-01-11*
