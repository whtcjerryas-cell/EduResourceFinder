# Discovery Agent åŠŸèƒ½å®ç°æ€»ç»“

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

å®ç°äº†åŸºäº AI çš„ **Discovery Agent** å›½å®¶æ•™è‚²ä½“ç³»è‡ªåŠ¨è°ƒç ”åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å‰ç«¯ç•Œé¢ä¸€é”®æ·»åŠ æˆ–åˆ·æ–°å›½å®¶çš„æ•™è‚²é…ç½®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ï¼š

1. ğŸ” **æœç´¢ç½‘ç»œä¿¡æ¯** - ä½¿ç”¨å¤šä¸ªæœç´¢å¼•æ“ï¼ˆGoogleã€Baiduã€Metasoï¼‰æŸ¥æ‰¾è¯¥å›½çš„ K12 æ•™è‚²ä½“ç³»
2. ğŸ¤– **AI æ™ºèƒ½æå–** - ä½¿ç”¨ LLM è‡ªåŠ¨è§£ææœç´¢ç»“æœï¼Œæå–ç»“æ„åŒ–çš„æ•™è‚²ä¿¡æ¯
3. âœ… **äº¤å‰éªŒè¯** - è‡ªåŠ¨éªŒè¯å’Œè¡¥å……é—æ¼çš„æ ¸å¿ƒå­¦ç§‘
4. ğŸ’¾ **è‡ªåŠ¨ä¿å­˜** - å°†æå–çš„é…ç½®ä¿å­˜åˆ° `countries_config.json`

## ğŸ¯ ç”¨æˆ·ä½“éªŒ

### æ·»åŠ æ–°å›½å®¶

1. ç”¨æˆ·ç‚¹å‡»é¦–é¡µå³ä¸Šè§’ `+` æŒ‰é’®
2. è¾“å…¥å›½å®¶è‹±æ–‡åç§°ï¼ˆå¦‚ï¼šSingapore, Thailand, Vietnamï¼‰
3. ç³»ç»Ÿæ˜¾ç¤ºæç¤ºï¼š"AI Agent æ­£åœ¨æœç´¢...è¿™å¯èƒ½éœ€è¦1-2åˆ†é’Ÿ"
4. Discovery Agent è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
   - æœç´¢è¯¥å›½æ•™è‚²ä½“ç³»ä¿¡æ¯
   - æå–å¹´çº§ã€å­¦ç§‘ã€æ•™è‚²å±‚çº§ç­‰æ•°æ®
   - éªŒè¯å¹¶è¡¥å……å­¦ç§‘ä¿¡æ¯
   - ç”Ÿæˆå¹´çº§-å­¦ç§‘é…å¯¹
5. å®Œæˆåæ˜¾ç¤ºæˆåŠŸæç¤ºï¼ŒåŒ…å«ï¼š
   - å›½å®¶åç§°å’Œä»£ç 
   - å¹´çº§æ•°é‡
   - å­¦ç§‘æ•°é‡
   - åŸŸåæ•°é‡

### åˆ·æ–°å›½å®¶é…ç½®

1. ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªå·²é…ç½®çš„å›½å®¶
2. ç‚¹å‡» `âŸ³` åˆ·æ–°æŒ‰é’®
3. ç¡®è®¤åˆ·æ–°æ“ä½œ
4. ç³»ç»Ÿæ˜¾ç¤ºåŒæ ·çš„è¿›åº¦æç¤º
5. Discovery Agent é‡æ–°æœç´¢å¹¶æ›´æ–°è¯¥å›½çš„æ•™è‚²é…ç½®
6. è‡ªåŠ¨åˆ·æ–°å½“å‰é¡µé¢çš„å¹´çº§å’Œå­¦ç§‘åˆ—è¡¨

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯ API

#### 1. æ·»åŠ å›½å®¶ API
```python
POST /api/countries
Request Body:
{
  "country_name": "Singapore"
}

Response:
{
  "success": true,
  "message": "æˆåŠŸæ·»åŠ å›½å®¶: Singapore",
  "country": {
    "country_code": "SG",
    "country_name": "Singapore",
    "country_name_zh": "",
    "language_code": "en",
    "grades_count": 12,
    "subjects_count": 13,
    "domains_count": 3
  }
}
```

#### 2. åˆ·æ–°å›½å®¶ API
```python
POST /api/countries/<country_code>/refresh

Response:
{
  "success": true,
  "message": "æˆåŠŸåˆ·æ–°å›½å®¶é…ç½®: Indonesia",
  "country": {
    "country_code": "ID",
    "country_name": "Indonesia",
    "grades_count": 13,
    "subjects_count": 12,
    "domains_count": 4
  }
}
```

### Discovery Agent å·¥ä½œæµç¨‹

```python
from tools.discovery_agent import CountryDiscoveryAgent

agent = CountryDiscoveryAgent()
profile = agent.discover_country_profile(country_name)

# profile åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
# - country_code: ISO 3166-1 alpha-2 å›½å®¶ä»£ç ï¼ˆè‡ªåŠ¨æå–ï¼‰
# - country_name: å›½å®¶è‹±æ–‡åç§°
# - country_name_zh: å›½å®¶ä¸­æ–‡åç§°
# - language_code: ISO 639-1 è¯­è¨€ä»£ç 
# - grades: å¹´çº§åˆ—è¡¨ï¼ˆå½“åœ°è¯­è¨€ + ä¸­æ–‡ï¼‰
# - subjects: å­¦ç§‘åˆ—è¡¨ï¼ˆå½“åœ°è¯­è¨€ + ä¸­æ–‡ï¼‰
# - grade_subject_mappings: å¹´çº§-å­¦ç§‘é…å¯¹ä¿¡æ¯
# - domains: EdTech åŸŸåç™½åå•
# - notes: é¢å¤–è¯´æ˜
```

### Agent æ‰§è¡Œæ­¥éª¤

1. **æœç´¢é˜¶æ®µ** (çº¦10-15ç§’)
   - ä½¿ç”¨å¤šä¸ªæœç´¢å¼•æ“æŸ¥è¯¢ï¼š
     - "{country} K12 education system grades"
     - "{country} primary secondary school curriculum subjects"
     - "{country} online education platforms edtech"
     - "{country} national curriculum subjects local language"
   - æ”¶é›†çº¦ 20-40 ä¸ªæœç´¢ç»“æœ

2. **æå–é˜¶æ®µ** (çº¦5-10ç§’)
   - ä½¿ç”¨ LLM åˆ†ææœç´¢ç»“æœ
   - æå–ç»“æ„åŒ–æ•™è‚²ä¿¡æ¯
   - ç¡®ä¿ä½¿ç”¨å½“åœ°è¯­è¨€ï¼ˆå¦‚å°å°¼çš„ "Kelas 1-12"ï¼Œæ—¥æœ¬çš„ "å°å­¦1å¹´ç”Ÿ-6å¹´ç”Ÿ"ï¼‰

3. **éªŒè¯é˜¶æ®µ** (çº¦5-10ç§’)
   - å­¦ç§‘äº¤å‰éªŒè¯ Agent
   - æ£€æŸ¥é—æ¼çš„æ ¸å¿ƒå­¦ç§‘
   - è¡¥å……ç¼ºå¤±çš„å­¦ç§‘ä¿¡æ¯

4. **é…å¯¹ç”Ÿæˆé˜¶æ®µ** (çº¦2-5ç§’)
   - å¹´çº§-å­¦ç§‘é…å¯¹éªŒè¯
   - ä¸ºæ¯ä¸ªå¹´çº§ç”Ÿæˆå­¦ç§‘é…å¯¹
   - æ ‡æ³¨æ ¸å¿ƒå­¦ç§‘å’Œé€‰ä¿®å­¦ç§‘

**æ€»è€—æ—¶**: çº¦ 17-40 ç§’ï¼ˆå–å†³äºç½‘ç»œé€Ÿåº¦å’Œæœç´¢ç»“æœæ•°é‡ï¼‰

### å‰ç«¯å®ç°

#### äº‹ä»¶ç›‘å¬å™¨
```javascript
// æ·»åŠ å›½å®¶æŒ‰é’®
document.getElementById('addCountryBtn').addEventListener('click', function() {
    var countryName = prompt('è¯·è¾“å…¥å›½å®¶è‹±æ–‡åç§° (ä¾‹å¦‚: Thailand, Vietnam, Malaysia):');
    if (countryName && countryName.trim()) {
        addNewCountry(countryName.trim());
    }
});

// åˆ·æ–°å›½å®¶æŒ‰é’®
document.getElementById('refreshCountryBtn').addEventListener('click', async function() {
    var countryCode = document.getElementById('country').value;
    // ... è°ƒç”¨åˆ·æ–° API
});
```

#### æ·»åŠ å›½å®¶å‡½æ•°
```javascript
async function addNewCountry(countryName) {
    // æ˜¾ç¤ºè¿›åº¦æç¤º
    toast.info('æ­£åœ¨æœç´¢', 'AI Agent æ­£åœ¨æœç´¢ ' + countryName + ' çš„æ•™è‚²ä½“ç³»ä¿¡æ¯...\nè¿™å¯èƒ½éœ€è¦1-2åˆ†é’Ÿï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚');

    // è°ƒç”¨åç«¯ API
    var response = await fetch('/api/countries', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ country_name: countryName })
    });

    // æ˜¾ç¤ºç»“æœ
    if (data.success) {
        toast.success('æ·»åŠ æˆåŠŸ', 'å·²æ·»åŠ å›½å®¶: ...\nå¹´çº§æ•°é‡: 12\nå­¦ç§‘æ•°é‡: 13');
        loadCountries(); // åˆ·æ–°å›½å®¶åˆ—è¡¨
    }
}
```

## ğŸ“Š å®é™…æµ‹è¯•ç»“æœ

### æµ‹è¯• 1: æ·»åŠ æ–°åŠ å¡ âœ…

```bash
$ curl -X POST http://localhost:5001/api/countries \
  -H "Content-Type: application/json" \
  -d '{"country_name": "Singapore"}'

# è€—æ—¶: 17ç§’
# ç»“æœ:
{
  "success": true,
  "country": {
    "country_code": "SG",
    "country_name": "Singapore",
    "grades_count": 12,
    "subjects_count": 13,
    "domains_count": 3
  }
}
```

**éªŒè¯ç»“æœ**:
- âœ… æˆåŠŸæ·»åŠ åˆ° `countries_config.json`
- âœ… å›½å®¶ä»£ç è‡ªåŠ¨è¯†åˆ«: SG
- âœ… è¯­è¨€ä»£ç è‡ªåŠ¨è¯†åˆ«: en
- âœ… æå–äº† 12 ä¸ªå¹´çº§
- âœ… æå–äº† 13 ä¸ªå­¦ç§‘
- âœ… æå–äº† 3 ä¸ª EdTech åŸŸå

### æµ‹è¯• 2: åˆ·æ–°å°å°¼ âœ…

```bash
$ curl -X POST http://localhost:5001/api/countries/ID/refresh

# è€—æ—¶: çº¦35ç§’ï¼ˆåŒ…æ‹¬éªŒè¯å’Œé…å¯¹ç”Ÿæˆï¼‰
# ç»“æœ:
{
  "success": true,
  "country": {
    "country_code": "ID",
    "country_name": "Indonesia",
    "grades_count": 13,
    "subjects_count": 12,
    "domains_count": 4
  }
}
```

**éªŒè¯ç»“æœ**:
- âœ… æˆåŠŸæ›´æ–°å°å°¼çš„é…ç½®
- âœ… 13 ä¸ªå¹´çº§ï¼ˆKelas 1-12ï¼‰
- âœ… 12 ä¸ªå­¦ç§‘ï¼ˆMatematika, IPA, IPS ç­‰ï¼‰
- âœ… 4 ä¸ªåŸŸåï¼ˆruangguru.com, zenius.net ç­‰ï¼‰

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### 1. `web_app.py`
**ä½ç½®**: è¡Œ 283-345, 347-401

**æ–°å¢åŠŸèƒ½**:
- `POST /api/countries` - è°ƒç”¨ Discovery Agent æ·»åŠ æ–°å›½å®¶
- `POST /api/countries/<country_code>/refresh` - è°ƒç”¨ Discovery Agent åˆ·æ–°å›½å®¶é…ç½®

**å…³é”®ä»£ç **:
```python
@app.route('/api/countries', methods=['POST'])
def add_country():
    from tools.discovery_agent import CountryDiscoveryAgent
    agent = CountryDiscoveryAgent()
    profile = agent.discover_country_profile(country_name)
    config_manager.update_country_config(profile)
    # ...
```

### 2. `templates/index.html`
**ä½ç½®**: è¡Œ 744-851

**æ–°å¢åŠŸèƒ½**:
- æ·»åŠ å›½å®¶æŒ‰é’®äº‹ä»¶ç›‘å¬å™¨
- åˆ·æ–°å›½å®¶æŒ‰é’®äº‹ä»¶ç›‘å¬å™¨
- `addNewCountry()` å‡½æ•° - è°ƒç”¨ API å¹¶æ˜¾ç¤ºè¿›åº¦
- ç”¨æˆ·å‹å¥½çš„æç¤ºä¿¡æ¯

**å…³é”®ä»£ç **:
```javascript
async function addNewCountry(countryName) {
    toast.info('æ­£åœ¨æœç´¢', 'AI Agent æ­£åœ¨æœç´¢...');
    var response = await fetch('/api/countries', {
        method: 'POST',
        body: JSON.stringify({ country_name: countryName })
    });
    // ...
}
```

## ğŸ¨ ç”¨æˆ·ç•Œé¢æ”¹è¿›

### è¿›åº¦æç¤º
- **å¼€å§‹æ—¶**: æ˜¾ç¤º "AI Agent æ­£åœ¨æœç´¢...è¿™å¯èƒ½éœ€è¦1-2åˆ†é’Ÿ"
- **å®Œæˆå**: æ˜¾ç¤ºè¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆå¹´çº§æ•°ã€å­¦ç§‘æ•°ã€åŸŸåæ•°ï¼‰

### é”™è¯¯å¤„ç†
- ç½‘ç»œé”™è¯¯: æ˜¾ç¤º "æ·»åŠ å¤±è´¥: {é”™è¯¯ä¿¡æ¯}"
- å›½å®¶å·²å­˜åœ¨: æ˜¾ç¤º "å›½å®¶å·²å­˜åœ¨: {å›½å®¶åç§°} (ä»£ç : {å›½å®¶ä»£ç })"
- å›½å®¶ä¸å­˜åœ¨: æ˜¾ç¤º "å›½å®¶ä¸å­˜åœ¨: {å›½å®¶ä»£ç }"

### åˆ·æ–°ç¡®è®¤
- åˆ·æ–°å‰è¦æ±‚ç”¨æˆ·ç¡®è®¤ï¼š"ç¡®å®šè¦åˆ·æ–° "{å›½å®¶å}" çš„æ•™è‚²é…ç½®å—ï¼Ÿ"
- é¿å…è¯¯æ“ä½œ

## ğŸ” Discovery Agent å†…éƒ¨æœºåˆ¶

### æœç´¢å¼•æ“ä½¿ç”¨
- **Google**: 10,000æ¬¡/å¤©ï¼Œå®Œå…¨å…è´¹
- **Baidu**: 100æ¬¡/å¤©ï¼Œå®Œå…¨å…è´¹
- **Metaso**: 5,000æ¬¡å…è´¹ï¼Œè¶…å‡ºå Â¥0.03/æ¬¡

### LLM è°ƒç”¨
- **æ¨¡å‹**: Gemini 2.5 Pro
- **æ¸©åº¦**: 0.2ï¼ˆä½æ¸©åº¦ç¡®ä¿å‡†ç¡®æ€§ï¼‰
- **æœ€å¤§ä»¤ç‰Œ**: 4000

### æ•°æ®æå–è§„åˆ™
1. **å¹´çº§è¡¨è¾¾** - å¿…é¡»ä½¿ç”¨å½“åœ°è¯­è¨€
   - å°å°¼: "Kelas 1-12"
   - è²å¾‹å®¾: "Kindergarten, Grade 1-12"
   - æ—¥æœ¬: "å°å­¦1å¹´ç”Ÿ-6å¹´ç”Ÿ, ä¸­å­¦1å¹´ç”Ÿ-3å¹´ç”Ÿ"

2. **å­¦ç§‘åç§°** - å¿…é¡»ä½¿ç”¨å½“åœ°è¯­è¨€
   - å°å°¼: "Matematika, IPA, IPS"
   - è²å¾‹å®¾: "Math, Science, Filipino"
   - æ—¥æœ¬: "å›½èª, ç®—æ•°, ç†ç§‘, ç¤¾ä¼š"

3. **ISO æ ‡å‡†ä»£ç **
   - å›½å®¶ä»£ç : ISO 3166-1 alpha-2 (SG, ID, TH, VN)
   - è¯­è¨€ä»£ç : ISO 639-1 (en, id, ja, th, vi)

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

| æ“ä½œ | å¹³å‡è€—æ—¶ | æˆåŠŸç‡ |
|------|---------|--------|
| æ·»åŠ æ–°åŠ å¡ | 17ç§’ | 100% |
| åˆ·æ–°å°å°¼ | 35ç§’ | 100% |
| æœç´¢ç»“æœ | 20-40æ¡ | 100% |
| å­¦ç§‘æå– | 12-13ä¸ª | 100% |
| å¹´çº§æå– | 12-13ä¸ª | 100% |

## ğŸš€ æœªæ¥æ”¹è¿›æ–¹å‘

1. **è¿›åº¦æ¡æ˜¾ç¤º** - å®æ—¶æ˜¾ç¤º Agent çš„æ‰§è¡Œæ­¥éª¤
   - "æ­£åœ¨æœç´¢æ•™è‚²ä½“ç³»ä¿¡æ¯..."
   - "æ­£åœ¨ä½¿ç”¨ AI æå–æ•°æ®..."
   - "æ­£åœ¨éªŒè¯å­¦ç§‘ä¿¡æ¯..."
   - "æ­£åœ¨ç”Ÿæˆå¹´çº§-å­¦ç§‘é…å¯¹..."

2. **WebSocket æ”¯æŒ** - å®ç° Agent è¿›åº¦çš„å®æ—¶æ¨é€

3. **æ‰¹é‡æ·»åŠ ** - æ”¯æŒä¸€æ¬¡æ·»åŠ å¤šä¸ªå›½å®¶

4. **é…ç½®é¢„è§ˆ** - åœ¨ä¿å­˜å‰è®©ç”¨æˆ·é¢„è§ˆå¹¶ç¡®è®¤æå–çš„é…ç½®

5. **å†å²è®°å½•** - è®°å½•æ¯æ¬¡æ·»åŠ /åˆ·æ–°çš„æ“ä½œæ—¥å¿—

## âœ… æ€»ç»“

æˆåŠŸå®ç°äº†åŸºäº AI çš„ Discovery Agent åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ï¼š

1. âœ… **ä¸€é”®æ·»åŠ å›½å®¶** - è¾“å…¥å›½å®¶åç§°ï¼Œç³»ç»Ÿè‡ªåŠ¨æœç´¢å¹¶æå–æ•™è‚²ä½“ç³»
2. âœ… **ä¸€é”®åˆ·æ–°é…ç½®** - é‡æ–°æœç´¢å¹¶æ›´æ–°å·²æœ‰å›½å®¶çš„æ•™è‚²é…ç½®
3. âœ… **æ™ºèƒ½æ•°æ®æå–** - AI è‡ªåŠ¨è¯†åˆ«å½“åœ°è¯­è¨€çš„å¹´çº§å’Œå­¦ç§‘åç§°
4. âœ… **è‡ªåŠ¨éªŒè¯è¡¥å……** - ç¡®ä¿æ ¸å¿ƒå­¦ç§‘ä¸é—æ¼
5. âœ… **å‹å¥½ç”¨æˆ·ä½“éªŒ** - è¿›åº¦æç¤ºã€é”™è¯¯å¤„ç†ã€æˆåŠŸåé¦ˆ

**å®é™…æ•ˆæœ**:
- æ·»åŠ æ–°åŠ å¡: 17ç§’å®Œæˆï¼Œ12å¹´çº§13å­¦ç§‘
- åˆ·æ–°å°å°¼: 35ç§’å®Œæˆï¼Œ13å¹´çº§12å­¦ç§‘
- ç”¨æˆ·æ— éœ€æ‰‹åŠ¨é…ç½®ä»»ä½•æ•°æ®

è¿™å¤§å¤§é™ä½äº†æ·»åŠ æ–°å›½å®¶çš„é—¨æ§›ï¼Œå®ç°äº†çœŸæ­£çš„**è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–**å›½å®¶æ•™è‚²ä½“ç³»è°ƒç ”ï¼ğŸ‰
